{% extends "public/templates/public_template.html"%}

{% block title%}Data{% endblock %}

{% block profile%}
{{current_user.username}}
{% endblock%}

{% block main%}
<div class="container">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="{{ url_for('static',filename='css/style.css')}}">

    <br>
    <div class="progress">
        <div class="progress-bar" role="progressbar" style="width: 73%" aria-valuenow="10" aria-valuemin="10"
            aria-valuemax="100"></div>
    </div>
    <br>

    <h1>Data preview</h1>
    <hr>



    <form action="/visualization/data_preview" method="POST">
        <div  class="form-group col-sm-4">
            <div class="form-group">
                <label for="exampleFormControlSelect1">Data preview options</label>
                <select class="form-control" id="data_type" name = "data_type">
                    <option>Select ...</option>
                  <option>Show data side by side</option>
                  <option>Show joined data (based on time)</option>
                  <option>Show joined data (based on id)</option>
                </select>
              </div>
        </div>

        <button class="btn btn-submit btn-primary">Load Data</button>
        <a target="_blank" rel="noopener noreferrer" href="/visualization/data_preview_expanded">Expand results</a>
        <br>
        <br>

            {%if data_type == 'Show data side by side'%}

            <div class="row">

                <div class="table col-sm-6 ">
                    <div class="table-responsive col-12" style="height:100vh;" id="col1" onscroll="OnScroll(this,'col2')">
                        {{ df1 | safe}}
                    </div>
                </div>

                <div class="table col-sm-6">
                    <div class="table-responsive col-12" style="height:100vh;" id="col2" onscroll="OnScroll(this,'col1')">
                        {{ df2 | safe}}
                    </div>
                </div>

            </div>



            {% endif %}

            {%if data_type == 'Show joined data (based on time)'%}
            <h4>Joined data (based on time)</h4>
            <div class="table">
                <div class="table-responsive col-11 table" style="height:300px;">
                    {{ df3 | safe}}
                </div>
            </div>
            {% endif%}

            {%if data_type == 'Show joined data (based on id)'%}
            <h4>Joined data (based on id)</h4>
            <div class="table">
                <div class="table-responsive col-12 table" style="height:300px;">
                    {{ df3 | safe}}
                </div>
            </div>
            {% endif%}

    </form>

    <!-- nav card -->
    <div class="card">
        <div class="row">
            <div class="col-sm-1">
                <a href="upload" class="btn btn-secondary btn-lg active" role="button" aria-pressed="true">Back</a>
            </div>
            <div class="col-sm-10">
                <p class="text-center font-weight-light">10/14</p>
            </div>
            <div class="col-sm-1">
                <a href="plot" class="btn btn-success btn-lg active float-right" role="button"
                    aria-pressed="true">Next</a>
            </div>
        </div>

    </div>
    <br>
    <br>
</div>


<script>
    function OnScroll(div,col) {
        var d1 = document.getElementById(col);
        d1.scrollTop = div.scrollTop;
    }
</script>
{%endblock%}